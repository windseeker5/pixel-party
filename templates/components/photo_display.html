<!-- Photo Display with Ken Burns effect and text overlay -->
<div class="relative w-full h-full overflow-hidden rounded-2xl bg-black">
    <!-- Photo with Ken Burns effect -->
    <img src="/media/photos/{{ photo.filename }}" 
         alt="Photo from {{ photo.guest_name }}"
         class="absolute inset-0 w-full h-full object-cover ken-burns-animation">
    
    <!-- SIMPLE TikTok-style text overlay - NO JAVASCRIPT -->
    {% if photo.wish_message %}
    <div class="tiktok-overlay tiktok-position-{{ (photo.id % 5) + 1 }}">
        <!-- Main wish text with random animation style and dynamic sizing -->
        <div class="tiktok-wish tiktok-style-{{ (photo.id % 3) + 1 }} {% if photo.wish_message|length <= 40 %}text-short{% elif photo.wish_message|length <= 80 %}text-medium{% else %}text-long{% endif %}">
            "{{ photo.wish_message }}"
        </div>
        
        <!-- Sender name with random color -->
        <div class="tiktok-name name-color-{{ (photo.id % 8) + 1 }}">
            - {{ photo.guest_name }}
        </div>
    </div>
    {% endif %}
</div>

<style>
/* Ken Burns effect for photos */
@keyframes kenBurnsSimple {
    0% { transform: scale(1.0) translate(0, 0); }
    100% { transform: scale(1.1) translate(-1%, -1%); }
}

.ken-burns-animation {
    animation: kenBurnsSimple 8s ease-out forwards;
}

/* TikTok overlay container - Base positioning */
.tiktok-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    pointer-events: none;
    z-index: 10;
    padding: 0 5%;
}

/* Position 1: Top area */
.tiktok-position-1 {
    justify-content: flex-start;
    padding-top: 20%;
}

/* Position 2: Upper-middle area */
.tiktok-position-2 {
    justify-content: flex-start;
    padding-top: 35%;
}

/* Position 3: Center (original) */
.tiktok-position-3 {
    justify-content: center;
}

/* Position 4: Lower-middle area */
.tiktok-position-4 {
    justify-content: flex-end;
    padding-bottom: 35%;
}

/* Position 5: Bottom area */
.tiktok-position-5 {
    justify-content: flex-end;
    padding-bottom: 20%;
}

/* Base TikTok text style with dynamic sizing */
.tiktok-wish {
    font-weight: 900;
    color: white;
    text-transform: uppercase;
    letter-spacing: 2px;
    line-height: 0.9;
    margin-bottom: 2rem;
    text-shadow: 3px 3px 0px rgba(0,0,0,1);
    max-width: 80%;
    word-wrap: break-word;
}

/* Dynamic font sizing based on text length */
.tiktok-wish.text-short {
    font-size: clamp(3rem, 7vw, 6rem); /* 1-40 chars */
}

.tiktok-wish.text-medium {
    font-size: clamp(2.5rem, 6vw, 5rem); /* 41-80 chars */
}

.tiktok-wish.text-long {
    font-size: clamp(2rem, 5vw, 4rem); /* 81-140 chars */
}

.tiktok-name {
    font-size: clamp(1.8rem, 4vw, 3rem);
    font-weight: 700;
    text-shadow: 2px 2px 0px rgba(0,0,0,1);
    margin-top: 1rem;
}

/* Random color classes for sender names */
.name-color-1 { color: #FF1493; } /* Deep Pink */
.name-color-2 { color: #00FFFF; } /* Cyan */
.name-color-3 { color: #32CD32; } /* Lime Green */
.name-color-4 { color: #FF4500; } /* Orange Red */
.name-color-5 { color: #DA70D6; } /* Orchid */
.name-color-6 { color: #FFD700; } /* Gold */
.name-color-7 { color: #FF6347; } /* Tomato */
.name-color-8 { color: #40E0D0; } /* Turquoise */

/* STYLE 1: Typewriter effect (pure CSS) - Fixed for multi-line */
.tiktok-style-1 {
    animation: typewriterReveal 3s steps(50, end) forwards;
    overflow: hidden;
    white-space: pre-wrap;
    word-wrap: break-word;
    max-width: 100%;
    border-right: 2px solid white;
}

@keyframes typewriterReveal {
    0% {
        max-height: 0;
        border-right: 2px solid white;
    }
    90% {
        max-height: 20rem;
        border-right: 2px solid white;
    }
    100% {
        max-height: 20rem;
        border-right: transparent;
    }
}

/* STYLE 2: Neon glow effect - reduced intensity */
.tiktok-style-2 {
    color: #FFFFFF;
    text-shadow:
        0 0 3px #FFFFFF,
        0 0 6px #FFFFFF,
        0 0 9px #00FFFF,
        0 0 12px #00FFFF,
        0 0 18px #00FFFF;
    animation: neonPulse 2s ease-in-out forwards;
}

@keyframes neonPulse {
    0% {
        opacity: 0;
        transform: scale(0.8);
        text-shadow: 0 0 3px #FFFFFF;
    }
    50% {
        opacity: 0.9;
        transform: scale(1.05);
        text-shadow:
            0 0 5px #FFFFFF,
            0 0 10px #FFFFFF,
            0 0 15px #00FFFF,
            0 0 20px #00FFFF,
            0 0 30px #00FFFF;
    }
    100% {
        opacity: 1;
        transform: scale(1);
        text-shadow:
            0 0 3px #FFFFFF,
            0 0 6px #FFFFFF,
            0 0 9px #00FFFF,
            0 0 12px #00FFFF,
            0 0 18px #00FFFF;
    }
}

/* STYLE 3: Bounce effect */
.tiktok-style-3 {
    color: #FFFFFF;
    text-shadow:
        3px 3px 0px #000000,
        -1px -1px 0px #000000,
        1px -1px 0px #000000,
        -1px 1px 0px #000000;
    animation: bounceIn 1.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
}

@keyframes bounceIn {
    0% {
        opacity: 0;
        transform: scale(0.3) rotate(-10deg);
    }
    50% {
        opacity: 0.9;
        transform: scale(1.2) rotate(5deg);
    }
    70% {
        opacity: 1;
        transform: scale(0.9) rotate(-2deg);
    }
    100% {
        opacity: 1;
        transform: scale(1) rotate(0deg);
    }
}

/* Name animation - always the same */
.tiktok-name {
    animation: nameSlideUp 2s 1s ease-out forwards;
    opacity: 0;
}

@keyframes nameSlideUp {
    0% {
        opacity: 0;
        transform: translateX(-50%) translateY(30px);
    }
    100% {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
}

/* Mobile responsiveness */
@media (max-width: 768px) {
    .tiktok-wish {
        font-size: clamp(2rem, 8vw, 3.5rem);
        letter-spacing: 1px;
        max-width: 90%;
    }
    
    .tiktok-name {
        font-size: clamp(1.5rem, 5vw, 2.5rem);
        bottom: 12%;
    }
}
</style>

