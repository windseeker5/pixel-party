<!-- Music queue component with enhanced styling -->
{% if music_queue %}
    <div class="space-y-2">
        {% for song in music_queue[:3] %}
        <div class="flex items-center space-x-2 bg-gradient-to-r from-purple-600/20 to-pink-600/20 rounded-lg p-1.5 hover:from-purple-600/30 hover:to-pink-600/30 transition-colors {% if loop.first %}ring-2 ring-purple-400 shadow-lg{% endif %}">
            <!-- Queue position -->
            <div class="w-5 h-5 bg-purple-600 rounded-full flex items-center justify-center text-xs font-bold text-white flex-shrink-0">
                {{ loop.index }}
            </div>
            <!-- Song info -->
            <div class="flex-1 overflow-hidden">
                <div class="font-semibold text-xs truncate">{{ song.song_title or 'Unknown Song' }}</div>
                <div class="text-xs opacity-70 truncate">{{ song.artist or 'Unknown Artist' }}</div>
            </div>
            <!-- Right side: Submitter name and badges -->
            <div class="flex-shrink-0 text-right">
                <div class="font-semibold text-sm">{{ song.guest_name or 'Anonymous' }}</div>
                <!-- Status and source indicators on right -->
                <div class="flex items-center justify-end gap-1 mt-1">
                    <!-- Status indicator -->
                    {% if song.status == 'downloading' %}
                    <div class="badge badge-xs badge-warning text-white" style="border-radius: 3px; font-size: 8px;">
                        downloading...
                    </div>
                    {% elif song.status == 'error' %}
                    <div class="badge badge-xs badge-error text-white" style="border-radius: 3px; font-size: 8px;">
                        error
                    </div>
                    {% elif song.status == 'pending' %}
                    <div class="badge badge-xs badge-neutral" style="border-radius: 3px; font-size: 8px;">
                        pending
                    </div>
                    {% endif %}
                    <!-- Source badge -->
                    <div class="badge badge-xs {% if song.source == 'local' %}badge-info{% else %}badge-error text-white{% endif %}" style="border-radius: 3px; font-size: 8px;">
                        {{ song.source }}
                    </div>
                </div>
            </div>
            <!-- Reserved space for indicator (always present for alignment) -->
            <div class="flex-shrink-0 w-4 flex justify-center">
                {% if loop.first %}
                <div class="animate-pulse">
                    <svg class="w-3 h-3 text-green-400" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"></path>
                    </svg>
                </div>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% if music_queue|length > 3 %}
    <div class="text-xs text-center mt-2 opacity-75">
        +{{ music_queue|length - 3 }} more songs in queue
    </div>
    {% endif %}
{% else %}
    <div class="text-center py-4">
        <svg class="w-12 h-12 mx-auto mb-2 opacity-30" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
        </svg>
        <div class="text-sm opacity-75">No music requests yet</div>
        <div class="text-xs opacity-50 mt-1">Waiting for song suggestions...</div>
    </div>
{% endif %}